<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 8.0.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"brkhu.fun","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.25.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"stackoverflow-light","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":true,"style":"default"},"fold":{"enable":false,"height":500},"language":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":150,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="过年那两天尝试在网站上放一个蛇引理的交换图热热手, 结果发现 MathJax 没有把 Pgf 和 TikZ 写进去, 所以不能用 tikz-cd 画交换图. 自带的 ams-cd 又只能画水平和竖直的箭头, 约等于什么都画不了. 那怎么办呢?">
<meta property="og:type" content="article">
<meta property="og:title" content="添加对 TikZ 的支持并修改配置">
<meta property="og:url" content="http://brkhu.fun/posts/2025/02/useTikZinHexo/index.html">
<meta property="og:site_name" content="Brkhu用来瞎搞的地方">
<meta property="og:description" content="过年那两天尝试在网站上放一个蛇引理的交换图热热手, 结果发现 MathJax 没有把 Pgf 和 TikZ 写进去, 所以不能用 tikz-cd 画交换图. 自带的 ams-cd 又只能画水平和竖直的箭头, 约等于什么都画不了. 那怎么办呢?">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-02-04T09:00:12.000Z">
<meta property="article:modified_time" content="2025-02-04T09:00:12.382Z">
<meta property="article:author" content="Brkhu">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://brkhu.fun/posts/2025/02/useTikZinHexo/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://brkhu.fun/posts/2025/02/useTikZinHexo/","path":"/posts/2025/02/useTikZinHexo/","title":"添加对 TikZ 的支持并修改配置"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>添加对 TikZ 的支持并修改配置 | Brkhu用来瞎搞的地方</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script>

  






  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/node-tikzjax@latest/css/fonts.css" /><style>.tikzjax { display: block; text-align: center; user-select: none; }</style></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Brkhu用来瞎搞的地方</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Brkhu"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Brkhu</p>
  <div class="site-description" itemprop="description">简介？好像是这里</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">22</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Brkhu" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Brkhu" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:w-zc21@mails.tsinghua.edu.cn" title="E-Mail → mailto:w-zc21@mails.tsinghua.edu.cn" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/yi-ge-pu-tong-ren-45" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;yi-ge-pu-tong-ren-45" rel="noopener me" target="_blank"><i class="fab fa-zhihu fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://space.bilibili.com/38619348" title="Bilibili → https:&#x2F;&#x2F;space.bilibili.com&#x2F;38619348" rel="noopener me" target="_blank"><i class="fab fa-bilibili fa-fw"></i></a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
          链接
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="https://algebratv.com/" title="https:&#x2F;&#x2F;algebratv.com" rel="noopener" target="_blank">Not A Goalkeeper 的个人网站</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="https://hexo.lukechen.lc/" title="https:&#x2F;&#x2F;hexo.lukechen.lc" rel="noopener" target="_blank">Luke Chen 的个人网站</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="https://vegetablefj.github.io/blog" title="https:&#x2F;&#x2F;vegetablefj.github.io&#x2F;blog" rel="noopener" target="_blank">vegetable fj 的个人网站</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="https://luody21.github.io/" title="https:&#x2F;&#x2F;luody21.github.io" rel="noopener" target="_blank">bdpqpqbd 的个人网站</a>
            </li>
        </ul>
      </div>
    </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://brkhu.fun/posts/2025/02/useTikZinHexo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Brkhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brkhu用来瞎搞的地方">
      <meta itemprop="description" content="简介？好像是这里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="添加对 TikZ 的支持并修改配置 | Brkhu用来瞎搞的地方">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          添加对 TikZ 的支持并修改配置
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-02-04 17:00:12" itemprop="dateCreated datePublished" datetime="2025-02-04T17:00:12+08:00">2025-02-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%BD%91%E7%AB%99/" itemprop="url" rel="index"><span itemprop="name">网站</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>过年那两天尝试在网站上放一个蛇引理的交换图热热手, 结果发现 MathJax 没有把 Pgf 和 TikZ 写进去, 所以不能用 tikz-cd 画交换图. 自带的 ams-cd 又只能画水平和竖直的箭头, 约等于什么都画不了. 那怎么办呢?</p>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -13.894ex;" xmlns="http://www.w3.org/2000/svg" width="60.292ex" height="28.919ex" role="img" focusable="false" viewBox="0 -6641 26649 12782"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtable"><g data-mml-node="mtr" transform="translate(0,5758)"><g data-mml-node="mtd" transform="translate(250,0)"><g data-mml-node="mpadded"></g></g><g data-mml-node="mtd" transform="translate(2375,0)"></g><g data-mml-node="mtd" transform="translate(4722,0)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="6B" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T97 124T98 167T98 217T98 272T98 329Q98 366 98 407T98 482T98 542T97 586T97 603Q94 622 83 628T38 637H20V660Q20 683 22 683L32 684Q42 685 61 686T98 688Q115 689 135 690T165 693T176 694H179V463L180 233L240 287Q300 341 304 347Q310 356 310 364Q310 383 289 385H284V431H293Q308 428 412 428Q475 428 484 431H489V385H476Q407 380 360 341Q286 278 286 274Q286 273 349 181T420 79Q434 60 451 53T500 46H511V0H505Q496 3 418 3Q322 3 307 0H299V46H306Q330 48 330 65Q330 72 326 79Q323 84 276 153T228 222L176 176V120V84Q176 65 178 59T189 49Q210 46 238 46H254V0H246Q231 3 137 3T28 0H20V46H36Z"></path><path data-c="65" d="M28 218Q28 273 48 318T98 391T163 433T229 448Q282 448 320 430T378 380T406 316T415 245Q415 238 408 231H126V216Q126 68 226 36Q246 30 270 30Q312 30 342 62Q359 79 369 104L379 128Q382 131 395 131H398Q415 131 415 121Q415 117 412 108Q393 53 349 21T250 -11Q155 -11 92 58T28 218ZM333 275Q322 403 238 411H236Q228 411 220 410T195 402T166 381T143 340T127 274V267H333V275Z" transform="translate(528,0)"></path><path data-c="72" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T98 122T98 161T98 203Q98 234 98 269T98 328L97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 60 434T96 436Q112 437 131 438T160 441T171 442H174V373Q213 441 271 441H277Q322 441 343 419T364 373Q364 352 351 337T313 322Q288 322 276 338T263 372Q263 381 265 388T270 400T273 405Q271 407 250 401Q234 393 226 386Q179 341 179 207V154Q179 141 179 127T179 101T180 81T180 66V61Q181 59 183 57T188 54T193 51T200 49T207 48T216 47T225 47T235 46T245 46H276V0H267Q249 3 140 3Q37 3 28 0H20V46H36Z" transform="translate(972,0)"></path></g></g><g data-mml-node="mo" transform="translate(1364,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1753,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(2282,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g><g data-mml-node="mtd" transform="translate(8365,0)"><g data-mml-node="mover"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z" transform="translate(1750,0)"></path><svg width="1850" height="865" x="0" y="-182" viewBox="462.5 -182 1850 865"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" transform="scale(3.567,1)"></path></svg></g><g data-mml-node="mpadded" transform="translate(165.8,783) scale(0.707)"><g transform="translate(330,100)"><g data-mml-node="mspace"></g></g></g></g></g><g data-mml-node="mtd" transform="translate(12087,0)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="6B" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T97 124T98 167T98 217T98 272T98 329Q98 366 98 407T98 482T98 542T97 586T97 603Q94 622 83 628T38 637H20V660Q20 683 22 683L32 684Q42 685 61 686T98 688Q115 689 135 690T165 693T176 694H179V463L180 233L240 287Q300 341 304 347Q310 356 310 364Q310 383 289 385H284V431H293Q308 428 412 428Q475 428 484 431H489V385H476Q407 380 360 341Q286 278 286 274Q286 273 349 181T420 79Q434 60 451 53T500 46H511V0H505Q496 3 418 3Q322 3 307 0H299V46H306Q330 48 330 65Q330 72 326 79Q323 84 276 153T228 222L176 176V120V84Q176 65 178 59T189 49Q210 46 238 46H254V0H246Q231 3 137 3T28 0H20V46H36Z"></path><path data-c="65" d="M28 218Q28 273 48 318T98 391T163 433T229 448Q282 448 320 430T378 380T406 316T415 245Q415 238 408 231H126V216Q126 68 226 36Q246 30 270 30Q312 30 342 62Q359 79 369 104L379 128Q382 131 395 131H398Q415 131 415 121Q415 117 412 108Q393 53 349 21T250 -11Q155 -11 92 58T28 218ZM333 275Q322 403 238 411H236Q228 411 220 410T195 402T166 381T143 340T127 274V267H333V275Z" transform="translate(528,0)"></path><path data-c="72" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T98 122T98 161T98 203Q98 234 98 269T98 328L97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 60 434T96 436Q112 437 131 438T160 441T171 442H174V373Q213 441 271 441H277Q322 441 343 419T364 373Q364 352 351 337T313 322Q288 322 276 338T263 372Q263 381 265 388T270 400T273 405Q271 407 250 401Q234 393 226 386Q179 341 179 207V154Q179 141 179 127T179 101T180 81T180 66V61Q181 59 183 57T188 54T193 51T200 49T207 48T216 47T225 47T235 46T245 46H276V0H267Q249 3 140 3Q37 3 28 0H20V46H36Z" transform="translate(972,0)"></path></g></g><g data-mml-node="mo" transform="translate(1364,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1753,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(2182,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g><g data-mml-node="mtd" transform="translate(15630,0)"><g data-mml-node="mover"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z" transform="translate(1750,0)"></path><svg width="1850" height="865" x="0" y="-182" viewBox="462.5 -182 1850 865"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" transform="scale(3.567,1)"></path></svg></g><g data-mml-node="mpadded" transform="translate(165.8,783) scale(0.707)"><g transform="translate(330,100)"><g data-mml-node="mspace"></g></g></g></g></g><g data-mml-node="mtd" transform="translate(19352,0)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="6B" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T97 124T98 167T98 217T98 272T98 329Q98 366 98 407T98 482T98 542T97 586T97 603Q94 622 83 628T38 637H20V660Q20 683 22 683L32 684Q42 685 61 686T98 688Q115 689 135 690T165 693T176 694H179V463L180 233L240 287Q300 341 304 347Q310 356 310 364Q310 383 289 385H284V431H293Q308 428 412 428Q475 428 484 431H489V385H476Q407 380 360 341Q286 278 286 274Q286 273 349 181T420 79Q434 60 451 53T500 46H511V0H505Q496 3 418 3Q322 3 307 0H299V46H306Q330 48 330 65Q330 72 326 79Q323 84 276 153T228 222L176 176V120V84Q176 65 178 59T189 49Q210 46 238 46H254V0H246Q231 3 137 3T28 0H20V46H36Z"></path><path data-c="65" d="M28 218Q28 273 48 318T98 391T163 433T229 448Q282 448 320 430T378 380T406 316T415 245Q415 238 408 231H126V216Q126 68 226 36Q246 30 270 30Q312 30 342 62Q359 79 369 104L379 128Q382 131 395 131H398Q415 131 415 121Q415 117 412 108Q393 53 349 21T250 -11Q155 -11 92 58T28 218ZM333 275Q322 403 238 411H236Q228 411 220 410T195 402T166 381T143 340T127 274V267H333V275Z" transform="translate(528,0)"></path><path data-c="72" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T98 122T98 161T98 203Q98 234 98 269T98 328L97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 60 434T96 436Q112 437 131 438T160 441T171 442H174V373Q213 441 271 441H277Q322 441 343 419T364 373Q364 352 351 337T313 322Q288 322 276 338T263 372Q263 381 265 388T270 400T273 405Q271 407 250 401Q234 393 226 386Q179 341 179 207V154Q179 141 179 127T179 101T180 81T180 66V61Q181 59 183 57T188 54T193 51T200 49T207 48T216 47T225 47T235 46T245 46H276V0H267Q249 3 140 3Q37 3 28 0H20V46H36Z" transform="translate(972,0)"></path></g></g><g data-mml-node="mo" transform="translate(1364,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1753,0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mo" transform="translate(2186,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g><g data-mml-node="mtr" transform="translate(0,3883)"><g data-mml-node="mtd" transform="translate(250,0)"></g><g data-mml-node="mtd" transform="translate(2375,0)"></g><g data-mml-node="mtd" transform="translate(5724,0)"><g data-mml-node="mo"><path data-c="2193" d="M473 86Q483 86 483 67Q483 63 483 61T483 56T481 53T480 50T478 48T474 47T470 46T464 44Q428 35 391 14T316 -55T264 -168Q264 -170 263 -173T262 -180T261 -184Q259 -194 251 -194Q242 -194 238 -176T221 -121T180 -49Q169 -34 155 -21T125 2T95 20T67 33T44 42T27 47L21 49Q17 53 17 67Q17 87 28 87Q33 87 42 84Q158 52 223 -45L230 -55V312Q230 391 230 482T229 591Q229 662 231 676T243 693Q244 694 251 694Q264 692 270 679V-55L277 -45Q307 1 353 33T430 76T473 86Z" transform="translate(83.5,-431)"></path><svg width="667" height="962" y="163" x="0" viewBox="0 240.5 667 962"><path data-c="23D0" d="M312 0V602H355V0H312Z" transform="scale(1,2.397)"></path></svg></g></g><g data-mml-node="mtd" transform="translate(9740,0)"></g><g data-mml-node="mtd" transform="translate(13039,0)"><g data-mml-node="mo"><path data-c="2193" d="M473 86Q483 86 483 67Q483 63 483 61T483 56T481 53T480 50T478 48T474 47T470 46T464 44Q428 35 391 14T316 -55T264 -168Q264 -170 263 -173T262 -180T261 -184Q259 -194 251 -194Q242 -194 238 -176T221 -121T180 -49Q169 -34 155 -21T125 2T95 20T67 33T44 42T27 47L21 49Q17 53 17 67Q17 87 28 87Q33 87 42 84Q158 52 223 -45L230 -55V312Q230 391 230 482T229 591Q229 662 231 676T243 693Q244 694 251 694Q264 692 270 679V-55L277 -45Q307 1 353 33T430 76T473 86Z" transform="translate(83.5,-431)"></path><svg width="667" height="962" y="163" x="0" viewBox="0 240.5 667 962"><path data-c="23D0" d="M312 0V602H355V0H312Z" transform="scale(1,2.397)"></path></svg></g></g><g data-mml-node="mtd" transform="translate(17005,0)"></g><g data-mml-node="mtd" transform="translate(20306,0)"><g data-mml-node="mo"><path data-c="2193" d="M473 86Q483 86 483 67Q483 63 483 61T483 56T481 53T480 50T478 48T474 47T470 46T464 44Q428 35 391 14T316 -55T264 -168Q264 -170 263 -173T262 -180T261 -184Q259 -194 251 -194Q242 -194 238 -176T221 -121T180 -49Q169 -34 155 -21T125 2T95 20T67 33T44 42T27 47L21 49Q17 53 17 67Q17 87 28 87Q33 87 42 84Q158 52 223 -45L230 -55V312Q230 391 230 482T229 591Q229 662 231 676T243 693Q244 694 251 694Q264 692 270 679V-55L277 -45Q307 1 353 33T430 76T473 86Z" transform="translate(83.5,-431)"></path><svg width="667" height="962" y="163" x="0" viewBox="0 240.5 667 962"><path data-c="23D0" d="M312 0V602H355V0H312Z" transform="scale(1,2.397)"></path></svg></g></g><g data-mml-node="mtd" transform="translate(24274,0)"></g></g><g data-mml-node="mtr" transform="translate(0,1875)"><g data-mml-node="mtd" transform="translate(250,0)"><g data-mml-node="mpadded"></g></g><g data-mml-node="mtd" transform="translate(2375,0)"></g><g data-mml-node="mtd" transform="translate(5682.5,0)"><g data-mml-node="mi"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g></g><g data-mml-node="mtd" transform="translate(8365,0)"><g data-mml-node="mover"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z" transform="translate(1750,0)"></path><svg width="1850" height="865" x="0" y="-182" viewBox="462.5 -182 1850 865"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" transform="scale(3.567,1)"></path></svg></g><g data-mml-node="mpadded" transform="translate(165.8,783) scale(0.707)"><g transform="translate(330,100)"><g data-mml-node="mspace"></g></g></g></g></g><g data-mml-node="mtd" transform="translate(12993,0)"><g data-mml-node="mi"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g></g><g data-mml-node="mtd" transform="translate(15630,0)"><g data-mml-node="mover"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z" transform="translate(1750,0)"></path><svg width="1850" height="865" x="0" y="-182" viewBox="462.5 -182 1850 865"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" transform="scale(3.567,1)"></path></svg></g><g data-mml-node="mpadded" transform="translate(165.8,783) scale(0.707)"><g transform="translate(330,100)"><g data-mml-node="mspace"></g></g></g></g></g><g data-mml-node="mtd" transform="translate(20259.5,0)"><g data-mml-node="mi"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g></g><g data-mml-node="mtd" transform="translate(22899,0)"><g data-mml-node="mover"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z" transform="translate(1750,0)"></path><svg width="1850" height="865" x="0" y="-182" viewBox="462.5 -182 1850 865"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" transform="scale(3.567,1)"></path></svg></g><g data-mml-node="mpadded" transform="translate(165.8,783) scale(0.707)"><g transform="translate(330,100)"><g data-mml-node="mspace"></g></g></g></g></g><g data-mml-node="mtd" transform="translate(26149,0)"><g data-mml-node="mn"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g></g><g data-mml-node="mtr"><g data-mml-node="mtd" transform="translate(250,0)"></g><g data-mml-node="mtd" transform="translate(2375,0)"></g><g data-mml-node="mtd" transform="translate(5724,0)"><g data-mml-node="mrow"><g data-mml-node="mo"><path data-c="2193" d="M473 86Q483 86 483 67Q483 63 483 61T483 56T481 53T480 50T478 48T474 47T470 46T464 44Q428 35 391 14T316 -55T264 -168Q264 -170 263 -173T262 -180T261 -184Q259 -194 251 -194Q242 -194 238 -176T221 -121T180 -49Q169 -34 155 -21T125 2T95 20T67 33T44 42T27 47L21 49Q17 53 17 67Q17 87 28 87Q33 87 42 84Q158 52 223 -45L230 -55V312Q230 391 230 482T229 591Q229 662 231 676T243 693Q244 694 251 694Q264 692 270 679V-55L277 -45Q307 1 353 33T430 76T473 86Z" transform="translate(83.5,-431)"></path><svg width="667" height="962" y="163" x="0" viewBox="0 240.5 667 962"><path data-c="23D0" d="M312 0V602H355V0H312Z" transform="scale(1,2.397)"></path></svg></g><g data-mml-node="mstyle" transform="translate(667,0) scale(0.707)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mpadded"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g></g></g></g></g></g><g data-mml-node="mtd" transform="translate(9740,0)"></g><g data-mml-node="mtd" transform="translate(13039,0)"><g data-mml-node="mrow"><g data-mml-node="mo"><path data-c="2193" d="M473 86Q483 86 483 67Q483 63 483 61T483 56T481 53T480 50T478 48T474 47T470 46T464 44Q428 35 391 14T316 -55T264 -168Q264 -170 263 -173T262 -180T261 -184Q259 -194 251 -194Q242 -194 238 -176T221 -121T180 -49Q169 -34 155 -21T125 2T95 20T67 33T44 42T27 47L21 49Q17 53 17 67Q17 87 28 87Q33 87 42 84Q158 52 223 -45L230 -55V312Q230 391 230 482T229 591Q229 662 231 676T243 693Q244 694 251 694Q264 692 270 679V-55L277 -45Q307 1 353 33T430 76T473 86Z" transform="translate(83.5,-431)"></path><svg width="667" height="962" y="163" x="0" viewBox="0 240.5 667 962"><path data-c="23D0" d="M312 0V602H355V0H312Z" transform="scale(1,2.397)"></path></svg></g><g data-mml-node="mstyle" transform="translate(667,0) scale(0.707)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mpadded"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g></g></g></g><g data-mml-node="mtd" transform="translate(17005,0)"></g><g data-mml-node="mtd" transform="translate(20306,0)"><g data-mml-node="mrow"><g data-mml-node="mo"><path data-c="2193" d="M473 86Q483 86 483 67Q483 63 483 61T483 56T481 53T480 50T478 48T474 47T470 46T464 44Q428 35 391 14T316 -55T264 -168Q264 -170 263 -173T262 -180T261 -184Q259 -194 251 -194Q242 -194 238 -176T221 -121T180 -49Q169 -34 155 -21T125 2T95 20T67 33T44 42T27 47L21 49Q17 53 17 67Q17 87 28 87Q33 87 42 84Q158 52 223 -45L230 -55V312Q230 391 230 482T229 591Q229 662 231 676T243 693Q244 694 251 694Q264 692 270 679V-55L277 -45Q307 1 353 33T430 76T473 86Z" transform="translate(83.5,-431)"></path><svg width="667" height="962" y="163" x="0" viewBox="0 240.5 667 962"><path data-c="23D0" d="M312 0V602H355V0H312Z" transform="scale(1,2.397)"></path></svg></g><g data-mml-node="mstyle" transform="translate(667,0) scale(0.707)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mpadded"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g></g></g></g></g></g><g data-mml-node="mtd" transform="translate(24274,0)"></g></g><g data-mml-node="mtr" transform="translate(0,-2008)"><g data-mml-node="mtd"><g data-mml-node="mn"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g><g data-mml-node="mpadded" transform="translate(500,0)"></g></g><g data-mml-node="mtd" transform="translate(1000,0)"><g data-mml-node="mover"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z" transform="translate(1750,0)"></path><svg width="1850" height="865" x="0" y="-182" viewBox="462.5 -182 1850 865"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" transform="scale(3.567,1)"></path></svg></g><g data-mml-node="mpadded" transform="translate(165.8,783) scale(0.707)"><g transform="translate(330,100)"><g data-mml-node="mspace"></g></g></g></g></g><g data-mml-node="mtd" transform="translate(5543.8,0)"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g><g data-mml-node="mo" transform="translate(783,413) scale(0.707)"><path data-c="2032" d="M79 43Q73 43 52 49T30 61Q30 68 85 293T146 528Q161 560 198 560Q218 560 240 545T262 501Q262 496 260 486Q259 479 173 263T84 45T79 43Z"></path></g></g><g data-mml-node="mpadded" transform="translate(1027.5,0)"></g></g><g data-mml-node="mtd" transform="translate(8365,0)"><g data-mml-node="mover"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z" transform="translate(1750,0)"></path><svg width="1850" height="865" x="0" y="-182" viewBox="462.5 -182 1850 865"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" transform="scale(3.567,1)"></path></svg></g><g data-mml-node="mpadded" transform="translate(165.8,783) scale(0.707)"><g transform="translate(330,100)"><g data-mml-node="mspace"></g></g></g></g></g><g data-mml-node="mtd" transform="translate(12854.3,0)"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mo" transform="translate(792,413) scale(0.707)"><path data-c="2032" d="M79 43Q73 43 52 49T30 61Q30 68 85 293T146 528Q161 560 198 560Q218 560 240 545T262 501Q262 496 260 486Q259 479 173 263T84 45T79 43Z"></path></g></g><g data-mml-node="mpadded" transform="translate(1036.5,0)"></g></g><g data-mml-node="mtd" transform="translate(15630,0)"><g data-mml-node="mover"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z" transform="translate(1750,0)"></path><svg width="1850" height="865" x="0" y="-182" viewBox="462.5 -182 1850 865"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" transform="scale(3.567,1)"></path></svg></g><g data-mml-node="mpadded" transform="translate(165.8,783) scale(0.707)"><g transform="translate(330,100)"><g data-mml-node="mspace"></g></g></g></g></g><g data-mml-node="mtd" transform="translate(20094.6,0)"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g><g data-mml-node="mo" transform="translate(845.3,413) scale(0.707)"><path data-c="2032" d="M79 43Q73 43 52 49T30 61Q30 68 85 293T146 528Q161 560 198 560Q218 560 240 545T262 501Q262 496 260 486Q259 479 173 263T84 45T79 43Z"></path></g></g></g></g><g data-mml-node="mtr" transform="translate(0,-3883)"><g data-mml-node="mtd" transform="translate(250,0)"></g><g data-mml-node="mtd" transform="translate(2375,0)"></g><g data-mml-node="mtd" transform="translate(5724,0)"><g data-mml-node="mo"><path data-c="2193" d="M473 86Q483 86 483 67Q483 63 483 61T483 56T481 53T480 50T478 48T474 47T470 46T464 44Q428 35 391 14T316 -55T264 -168Q264 -170 263 -173T262 -180T261 -184Q259 -194 251 -194Q242 -194 238 -176T221 -121T180 -49Q169 -34 155 -21T125 2T95 20T67 33T44 42T27 47L21 49Q17 53 17 67Q17 87 28 87Q33 87 42 84Q158 52 223 -45L230 -55V312Q230 391 230 482T229 591Q229 662 231 676T243 693Q244 694 251 694Q264 692 270 679V-55L277 -45Q307 1 353 33T430 76T473 86Z" transform="translate(83.5,-431)"></path><svg width="667" height="962" y="163" x="0" viewBox="0 240.5 667 962"><path data-c="23D0" d="M312 0V602H355V0H312Z" transform="scale(1,2.397)"></path></svg></g></g><g data-mml-node="mtd" transform="translate(9740,0)"></g><g data-mml-node="mtd" transform="translate(13039,0)"><g data-mml-node="mo"><path data-c="2193" d="M473 86Q483 86 483 67Q483 63 483 61T483 56T481 53T480 50T478 48T474 47T470 46T464 44Q428 35 391 14T316 -55T264 -168Q264 -170 263 -173T262 -180T261 -184Q259 -194 251 -194Q242 -194 238 -176T221 -121T180 -49Q169 -34 155 -21T125 2T95 20T67 33T44 42T27 47L21 49Q17 53 17 67Q17 87 28 87Q33 87 42 84Q158 52 223 -45L230 -55V312Q230 391 230 482T229 591Q229 662 231 676T243 693Q244 694 251 694Q264 692 270 679V-55L277 -45Q307 1 353 33T430 76T473 86Z" transform="translate(83.5,-431)"></path><svg width="667" height="962" y="163" x="0" viewBox="0 240.5 667 962"><path data-c="23D0" d="M312 0V602H355V0H312Z" transform="scale(1,2.397)"></path></svg></g></g><g data-mml-node="mtd" transform="translate(17005,0)"></g><g data-mml-node="mtd" transform="translate(20306,0)"><g data-mml-node="mo"><path data-c="2193" d="M473 86Q483 86 483 67Q483 63 483 61T483 56T481 53T480 50T478 48T474 47T470 46T464 44Q428 35 391 14T316 -55T264 -168Q264 -170 263 -173T262 -180T261 -184Q259 -194 251 -194Q242 -194 238 -176T221 -121T180 -49Q169 -34 155 -21T125 2T95 20T67 33T44 42T27 47L21 49Q17 53 17 67Q17 87 28 87Q33 87 42 84Q158 52 223 -45L230 -55V312Q230 391 230 482T229 591Q229 662 231 676T243 693Q244 694 251 694Q264 692 270 679V-55L277 -45Q307 1 353 33T430 76T473 86Z" transform="translate(83.5,-431)"></path><svg width="667" height="962" y="163" x="0" viewBox="0 240.5 667 962"><path data-c="23D0" d="M312 0V602H355V0H312Z" transform="scale(1,2.397)"></path></svg></g></g><g data-mml-node="mtd" transform="translate(24274,0)"></g></g><g data-mml-node="mtr" transform="translate(0,-5891)"><g data-mml-node="mtd" transform="translate(250,0)"><g data-mml-node="mpadded"></g></g><g data-mml-node="mtd" transform="translate(2375,0)"></g><g data-mml-node="mtd" transform="translate(4250,0)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="63" d="M370 305T349 305T313 320T297 358Q297 381 312 396Q317 401 317 402T307 404Q281 408 258 408Q209 408 178 376Q131 329 131 219Q131 137 162 90Q203 29 272 29Q313 29 338 55T374 117Q376 125 379 127T395 129H409Q415 123 415 120Q415 116 411 104T395 71T366 33T318 2T249 -11Q163 -11 99 53T34 214Q34 318 99 383T250 448T370 421T404 357Q404 334 387 320Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(444,0)"></path><path data-c="6B" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T97 124T98 167T98 217T98 272T98 329Q98 366 98 407T98 482T98 542T97 586T97 603Q94 622 83 628T38 637H20V660Q20 683 22 683L32 684Q42 685 61 686T98 688Q115 689 135 690T165 693T176 694H179V463L180 233L240 287Q300 341 304 347Q310 356 310 364Q310 383 289 385H284V431H293Q308 428 412 428Q475 428 484 431H489V385H476Q407 380 360 341Q286 278 286 274Q286 273 349 181T420 79Q434 60 451 53T500 46H511V0H505Q496 3 418 3Q322 3 307 0H299V46H306Q330 48 330 65Q330 72 326 79Q323 84 276 153T228 222L176 176V120V84Q176 65 178 59T189 49Q210 46 238 46H254V0H246Q231 3 137 3T28 0H20V46H36Z" transform="translate(944,0)"></path><path data-c="65" d="M28 218Q28 273 48 318T98 391T163 433T229 448Q282 448 320 430T378 380T406 316T415 245Q415 238 408 231H126V216Q126 68 226 36Q246 30 270 30Q312 30 342 62Q359 79 369 104L379 128Q382 131 395 131H398Q415 131 415 121Q415 117 412 108Q393 53 349 21T250 -11Q155 -11 92 58T28 218ZM333 275Q322 403 238 411H236Q228 411 220 410T195 402T166 381T143 340T127 274V267H333V275Z" transform="translate(1472,0)"></path><path data-c="72" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T98 122T98 161T98 203Q98 234 98 269T98 328L97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 60 434T96 436Q112 437 131 438T160 441T171 442H174V373Q213 441 271 441H277Q322 441 343 419T364 373Q364 352 351 337T313 322Q288 322 276 338T263 372Q263 381 265 388T270 400T273 405Q271 407 250 401Q234 393 226 386Q179 341 179 207V154Q179 141 179 127T179 101T180 81T180 66V61Q181 59 183 57T188 54T193 51T200 49T207 48T216 47T225 47T235 46T245 46H276V0H267Q249 3 140 3Q37 3 28 0H20V46H36Z" transform="translate(1916,0)"></path></g></g><g data-mml-node="mo" transform="translate(2308,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(2697,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(3226,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g><g data-mml-node="mtd" transform="translate(8365,0)"><g data-mml-node="mover"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z" transform="translate(1750,0)"></path><svg width="1850" height="865" x="0" y="-182" viewBox="462.5 -182 1850 865"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" transform="scale(3.567,1)"></path></svg></g><g data-mml-node="mpadded" transform="translate(165.8,783) scale(0.707)"><g transform="translate(330,100)"><g data-mml-node="mspace"></g></g></g></g></g><g data-mml-node="mtd" transform="translate(11615,0)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="63" d="M370 305T349 305T313 320T297 358Q297 381 312 396Q317 401 317 402T307 404Q281 408 258 408Q209 408 178 376Q131 329 131 219Q131 137 162 90Q203 29 272 29Q313 29 338 55T374 117Q376 125 379 127T395 129H409Q415 123 415 120Q415 116 411 104T395 71T366 33T318 2T249 -11Q163 -11 99 53T34 214Q34 318 99 383T250 448T370 421T404 357Q404 334 387 320Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(444,0)"></path><path data-c="6B" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T97 124T98 167T98 217T98 272T98 329Q98 366 98 407T98 482T98 542T97 586T97 603Q94 622 83 628T38 637H20V660Q20 683 22 683L32 684Q42 685 61 686T98 688Q115 689 135 690T165 693T176 694H179V463L180 233L240 287Q300 341 304 347Q310 356 310 364Q310 383 289 385H284V431H293Q308 428 412 428Q475 428 484 431H489V385H476Q407 380 360 341Q286 278 286 274Q286 273 349 181T420 79Q434 60 451 53T500 46H511V0H505Q496 3 418 3Q322 3 307 0H299V46H306Q330 48 330 65Q330 72 326 79Q323 84 276 153T228 222L176 176V120V84Q176 65 178 59T189 49Q210 46 238 46H254V0H246Q231 3 137 3T28 0H20V46H36Z" transform="translate(944,0)"></path><path data-c="65" d="M28 218Q28 273 48 318T98 391T163 433T229 448Q282 448 320 430T378 380T406 316T415 245Q415 238 408 231H126V216Q126 68 226 36Q246 30 270 30Q312 30 342 62Q359 79 369 104L379 128Q382 131 395 131H398Q415 131 415 121Q415 117 412 108Q393 53 349 21T250 -11Q155 -11 92 58T28 218ZM333 275Q322 403 238 411H236Q228 411 220 410T195 402T166 381T143 340T127 274V267H333V275Z" transform="translate(1472,0)"></path><path data-c="72" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T98 122T98 161T98 203Q98 234 98 269T98 328L97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 60 434T96 436Q112 437 131 438T160 441T171 442H174V373Q213 441 271 441H277Q322 441 343 419T364 373Q364 352 351 337T313 322Q288 322 276 338T263 372Q263 381 265 388T270 400T273 405Q271 407 250 401Q234 393 226 386Q179 341 179 207V154Q179 141 179 127T179 101T180 81T180 66V61Q181 59 183 57T188 54T193 51T200 49T207 48T216 47T225 47T235 46T245 46H276V0H267Q249 3 140 3Q37 3 28 0H20V46H36Z" transform="translate(1916,0)"></path></g></g><g data-mml-node="mo" transform="translate(2308,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(2697,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(3126,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g><g data-mml-node="mtd" transform="translate(15630,0)"><g data-mml-node="mover"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z" transform="translate(1750,0)"></path><svg width="1850" height="865" x="0" y="-182" viewBox="462.5 -182 1850 865"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" transform="scale(3.567,1)"></path></svg></g><g data-mml-node="mpadded" transform="translate(165.8,783) scale(0.707)"><g transform="translate(330,100)"><g data-mml-node="mspace"></g></g></g></g></g><g data-mml-node="mtd" transform="translate(18880,0)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="63" d="M370 305T349 305T313 320T297 358Q297 381 312 396Q317 401 317 402T307 404Q281 408 258 408Q209 408 178 376Q131 329 131 219Q131 137 162 90Q203 29 272 29Q313 29 338 55T374 117Q376 125 379 127T395 129H409Q415 123 415 120Q415 116 411 104T395 71T366 33T318 2T249 -11Q163 -11 99 53T34 214Q34 318 99 383T250 448T370 421T404 357Q404 334 387 320Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(444,0)"></path><path data-c="6B" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T97 124T98 167T98 217T98 272T98 329Q98 366 98 407T98 482T98 542T97 586T97 603Q94 622 83 628T38 637H20V660Q20 683 22 683L32 684Q42 685 61 686T98 688Q115 689 135 690T165 693T176 694H179V463L180 233L240 287Q300 341 304 347Q310 356 310 364Q310 383 289 385H284V431H293Q308 428 412 428Q475 428 484 431H489V385H476Q407 380 360 341Q286 278 286 274Q286 273 349 181T420 79Q434 60 451 53T500 46H511V0H505Q496 3 418 3Q322 3 307 0H299V46H306Q330 48 330 65Q330 72 326 79Q323 84 276 153T228 222L176 176V120V84Q176 65 178 59T189 49Q210 46 238 46H254V0H246Q231 3 137 3T28 0H20V46H36Z" transform="translate(944,0)"></path><path data-c="65" d="M28 218Q28 273 48 318T98 391T163 433T229 448Q282 448 320 430T378 380T406 316T415 245Q415 238 408 231H126V216Q126 68 226 36Q246 30 270 30Q312 30 342 62Q359 79 369 104L379 128Q382 131 395 131H398Q415 131 415 121Q415 117 412 108Q393 53 349 21T250 -11Q155 -11 92 58T28 218ZM333 275Q322 403 238 411H236Q228 411 220 410T195 402T166 381T143 340T127 274V267H333V275Z" transform="translate(1472,0)"></path><path data-c="72" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T98 122T98 161T98 203Q98 234 98 269T98 328L97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 60 434T96 436Q112 437 131 438T160 441T171 442H174V373Q213 441 271 441H277Q322 441 343 419T364 373Q364 352 351 337T313 322Q288 322 276 338T263 372Q263 381 265 388T270 400T273 405Q271 407 250 401Q234 393 226 386Q179 341 179 207V154Q179 141 179 127T179 101T180 81T180 66V61Q181 59 183 57T188 54T193 51T200 49T207 48T216 47T225 47T235 46T245 46H276V0H267Q249 3 140 3Q37 3 28 0H20V46H36Z" transform="translate(1916,0)"></path></g></g><g data-mml-node="mo" transform="translate(2308,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(2697,0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mo" transform="translate(3130,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></g><g data-mml-node="mspace" transform="translate(26649,0)"></g></g></g></svg></mjx-container></p>
<span id="more"></span>
<!--https://ruiboqian.github.io/2020/07/12/theme-next-more/-->

<p>上网搜了一下, The Stacks Project 用的是 XY-pic, 香蕉空间用基于 MediaWiki, 都不是我们想要的. 但是找到了一个过滤器 <code>hexo-filter-tikzjax</code><a target="_blank" rel="noopener" href="https://github.com/prinsss/hexo-filter-tikzjax">^1</a>, 看起来不错. 在此之前我又安装了 <code>hexo-filter-mathjax</code> 并把 NexT 主题配置文件中的 <code>math.mathjax.enable</code> 改回了 <code>false</code>. 直接把香蕉空间蛇引理<a target="_blank" rel="noopener" href="https://www.bananaspace.org/wiki/%E8%9B%87%E5%BD%A2%E5%BC%95%E7%90%86">^2</a>的源码拔过来, 放在一个 <code>tikz</code> 代码块里, 试用出来的结果如下:</p>
<p><span class="tikzjax"><svg xmlns="http://www.w3.org/2000/svg" width="300.518" height="153.381" viewBox="-72 -72 225.389 115.036"><g stroke="#000" stroke-miterlimit="10" stroke-width=".4"><g stroke="none"><g stroke="none"><text x="95.147" y="-114.107" font-family="cmr10" font-size="10" transform="translate(-120.778 53.858)">k</text><text x="100.147" y="-114.107" font-family="cmr10" font-size="10" transform="translate(-120.778 53.858)">er</text><text x="108.508" y="-118.58" font-family="cmsy7" font-size="7" transform="translate(-120.778 53.858)">0</text></g><g stroke="none" font-family="cmr10" font-size="10"><text x="151.966" y="-114.107" transform="translate(-119.375 53.858)">k</text><text x="156.966" y="-114.107" transform="translate(-119.375 53.858)">er</text></g><g stroke="none"><text x="209.938" y="-114.107" font-family="cmr10" font-size="10" transform="translate(-121.93 53.858)">k</text><text x="214.938" y="-114.107" font-family="cmr10" font-size="10" transform="translate(-121.93 53.858)">er</text><text x="223.299" y="-118.58" font-family="cmsy7" font-size="7" transform="translate(-121.93 53.858)">00</text></g><g stroke="none"><text x="95.147" y="-81.27" font-family="cmmi10" font-size="10" transform="translate(-118.632 53.858)">X</text><text x="104.216" y="-84.899" font-family="cmsy7" font-size="7" transform="translate(-118.632 53.858)">0</text></g><text x="151.966" y="-81.27" stroke="none" font-family="cmmi10" font-size="10" transform="translate(-117.23 53.858)">X</text><g stroke="none"><text x="209.938" y="-81.27" font-family="cmmi10" font-size="10" transform="translate(-119.785 53.858)">X</text><text x="219.008" y="-84.899" font-family="cmsy7" font-size="7" transform="translate(-119.785 53.858)">00</text></g><text x="259.008" y="-81.27" stroke="none" font-family="cmr10" font-size="10" transform="translate(-115.194 53.858)">0</text><text x="47.23" y="-48.433" stroke="none" font-family="cmr10" font-size="10" transform="translate(-115.194 53.858)">0</text><g stroke="none"><text x="95.147" y="-48.433" font-family="cmmi10" font-size="10" transform="translate(-118.111 53.858)">Y</text><text x="103.174" y="-52.062" font-family="cmsy7" font-size="7" transform="translate(-118.111 53.858)">0</text></g><text x="151.966" y="-48.433" stroke="none" font-family="cmmi10" font-size="10" transform="translate(-116.708 53.858)">Y</text><g stroke="none"><text x="209.938" y="-48.433" font-family="cmmi10" font-size="10" transform="translate(-119.264 53.858)">Y</text><text x="217.966" y="-52.062" font-family="cmsy7" font-size="7" transform="translate(-119.264 53.858)">00</text></g><g stroke="none"><text x="95.147" y="-14.752" font-family="cmr10" font-size="10" transform="translate(-125.5 53.858)">cok</text><text x="109.591" y="-14.752" font-family="cmr10" font-size="10" transform="translate(-125.5 53.858)">er</text><text x="117.952" y="-19.224" font-family="cmsy7" font-size="7" transform="translate(-125.5 53.858)">0</text></g><g stroke="none" font-family="cmr10" font-size="10"><text x="151.966" y="-14.752" transform="translate(-124.097 53.858)">cok</text><text x="166.41" y="-14.752" transform="translate(-124.097 53.858)">er</text></g><g stroke="none"><text x="209.938" y="-14.752" font-family="cmr10" font-size="10" transform="translate(-126.653 53.858)">cok</text><text x="224.383" y="-14.752" font-family="cmr10" font-size="10" transform="translate(-126.653 53.858)">er</text><text x="232.744" y="-19.224" font-family="cmsy7" font-size="7" transform="translate(-126.653 53.858)">00</text></g></g><path fill="none" d="M-4.959-62.75h32.645"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M25.806-65.149c.38 1.44 1.226 2.12 2.08 2.4-.854.28-1.7.96-2.08 2.4"/><path fill="none" d="M-17.548-56.39v17.2"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M-15.148-41.07c-1.44.38-2.12 1.228-2.4 2.08-.28-.852-.96-1.7-2.4-2.08"/><path fill="none" d="M50.458-62.75h32.644"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M81.222-65.149c.38 1.44 1.227 2.12 2.08 2.4-.853.28-1.7.96-2.08 2.4"/><path fill="none" d="M39.272-56.39v17.885"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M41.671-40.385c-1.44.38-2.12 1.227-2.4 2.08-.28-.853-.96-1.7-2.4-2.08"/><path fill="none" d="M97.244-56.39v17.2"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M99.644-41.07c-1.44.38-2.12 1.228-2.4 2.08-.28-.852-.96-1.7-2.4-2.08"/><path fill="none" d="M-17.548-23.552v17.2"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M-15.148-8.232c-1.44.38-2.12 1.227-2.4 2.08-.28-.853-.96-1.7-2.4-2.08"/><path fill="none" d="M-7.105-29.912h36.936"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M27.951-32.312c.38 1.44 1.227 2.12 2.08 2.4-.853.28-1.7.96-2.08 2.4"/><text x="40.424" y="-14.752" stroke="none" font-family="cmmi7" font-size="7" transform="translate(-31.203 -18.874)">f</text><path fill="none" d="M39.272-23.552v17.885"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M41.671-7.547c-1.44.38-2.12 1.226-2.4 2.08-.28-.854-.96-1.7-2.4-2.08"/><path fill="none" d="M48.312-29.912h36.936"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M83.368-32.312c.38 1.44 1.227 2.12 2.08 2.4-.853.28-1.7.96-2.08 2.4"/><text x="40.424" y="-14.752" stroke="none" font-family="cmmi7" font-size="7" transform="translate(24.48 -18.874)">g</text><path fill="none" d="M108.84-29.912h30.068"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M137.028-32.312c.38 1.44 1.227 2.12 2.08 2.4-.853.28-1.7.96-2.08 2.4"/><path fill="none" d="M97.244-23.552v17.2"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M99.644-8.232c-1.44.38-2.12 1.227-2.4 2.08-.28-.853-.96-1.7-2.4-2.08"/><path fill="none" d="M-58.459 2.926h30.589"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M-29.75.526c.38 1.44 1.227 2.12 2.08 2.4-.853.28-1.7.96-2.08 2.4"/><path fill="none" d="M-7.626 2.926h37.978"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M28.472.526c.38 1.44 1.227 2.12 2.08 2.4-.853.28-1.7.96-2.08 2.4"/><text x="40.424" y="-14.752" stroke="none" font-family="cmmi7" font-size="7" transform="translate(-31.225 15.325)">u</text><path fill="none" d="M-17.548 9.285v17.2"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M-15.148 24.605c-1.44.38-2.12 1.227-2.4 2.08-.28-.853-.96-1.7-2.4-2.08"/><path fill="none" d="M47.791 2.926h37.978"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M83.889.526c.38 1.44 1.227 2.12 2.08 2.4-.853.28-1.7.96-2.08 2.4"/><text x="40.424" y="-14.752" stroke="none" font-family="cmmi7" font-size="7" transform="translate(24.43 15.325)">v</text><path fill="none" d="M39.272 9.285v18.617"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M41.671 26.022c-1.44.38-2.12 1.227-2.4 2.08-.28-.853-.96-1.7-2.4-2.08"/><path fill="none" d="M97.244 9.285v17.2"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M99.644 24.605c-1.44.38-2.12 1.227-2.4 2.08-.28-.853-.96-1.7-2.4-2.08"/><path fill="none" stroke="#fff" stroke-width="6.458" d="M-34.859 36.606h-4.611a4 4 0 0 1-4-4v-43.358a4 4 0 0 1 4-4h155.066a4 4 0 0 0 4-4V-58.75a4 4 0 0 0-4-4h-4.61"/><g stroke-dasharray="2.79985,1.59991"><path fill="none" d="M-35.259 36.606h-4.211a4 4 0 0 1-4-4v-43.358a4 4 0 0 1 4-4h155.066a4 4 0 0 0 4-4V-58.75a4 4 0 0 0-4-4h-4.61"/><path fill="none" stroke-dasharray="none" stroke-linecap="round" stroke-linejoin="round" d="M-37.139 34.206c.38 1.44 1.227 2.12 2.08 2.4-.853.28-1.7.96-2.08 2.4"/><g fill="#fff"><path stroke="none" d="M26.984-19.335h-.194a4 4 0 0 0-4 4v1.166a4 4 0 0 0 4 4h.194a4 4 0 0 0 4-4v-1.166a4 4 0 0 0-4-4M22.79-10.17"/><text x="40.424" y="-14.752" fill="#000" stroke="none" font-family="cmmi7" font-size="7" transform="translate(-15.482 2.43)">±</text></g></g><path fill="none" d="M-.237 36.606h23.2"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M21.083 34.206c.38 1.44 1.227 2.12 2.08 2.4-.853.28-1.7.96-2.08 2.4"/><path fill="none" d="M55.18 36.606h23.2"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M76.5 34.206c.38 1.44 1.227 2.12 2.08 2.4-.853.28-1.7.96-2.08 2.4"/></g></svg></span></p>

<p>有两个问题: 第一个是太小了, 第二个是颜色不对. 还好这两个问题都不难解决: 第一个问题只需把 <code>svg</code> 文件的 <code>width</code> 和 <code>height</code> 都变成原来的 1.5 倍即可, 不合适的做法是直接在头部的 <code>&lt;style&gt;.tikzjax{...}&lt;/style&gt;</code> 中添加 <code>transform: scale(1.5)</code>, 也就是直接修改 <code>hexo-filter-tikzjax/dist/common.js</code> 中的 <code>export.defaultConfig.inline_style</code> (或者主文件夹 <code>_config.yml</code> 中的 <code>tikzjax</code> 设置? ), 因为这会造成一些不好的显示问题. 第二个问题查看 <code>svg</code> 文件可以发现: 前者的 <code>stroke</code> 和 <code>fill</code> 都是 <code>currentColor</code>, 这里是 <code>#555</code>; 而后者的 <code>stroke</code> 是纯黑色 <code>#000</code>. 这个不难改, 但是直接在开头改完发现 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.023ex;" xmlns="http://www.w3.org/2000/svg" width="1.005ex" height="1.645ex" role="img" focusable="false" viewBox="0 -717 444 727"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D6FF" d="M195 609Q195 656 227 686T302 717Q319 716 351 709T407 697T433 690Q451 682 451 662Q451 644 438 628T403 612Q382 612 348 641T288 671T249 657T235 628Q235 584 334 463Q401 379 401 292Q401 169 340 80T205 -10H198Q127 -10 83 36T36 153Q36 286 151 382Q191 413 252 434Q252 435 245 449T230 481T214 521T201 566T195 609ZM112 130Q112 83 136 55T204 27Q233 27 256 51T291 111T309 178T316 232Q316 267 309 298T295 344T269 400L259 396Q215 381 183 342T137 256T118 179T112 130Z"></path></g></g></g></svg></mjx-container> 还是黑色, 这看起来是因为希腊字母特殊渲染自带了一个 <code>fill="#000"</code>. 这个应该只需要把所有的 <code>#000</code> 替换成 <code>currentColor</code> 就行.</p>
<p>为了还能显示原来的效果, 我把原来识别 <code>tikz</code> 代码块的部分改成了识别 <code>tikz</code> 或 <code>tikzcd</code> 代码块, 使用的占位符也做了修改, 从而可以被后续插入 <code>svg</code> 部分的正则表达式认出来不同, 进而应用上面的变化. 具体来讲, 将 <code>hexo-filter-tikzjax/dist/render-tikzjax.js</code> 修改为:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="keyword">var</span> __importDefault = (<span class="variable language_">this</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">__importDefault</span>) || <span class="keyword">function</span> (<span class="params">mod</span>) {</span><br><span class="line">    <span class="keyword">return</span> (mod &amp;&amp; mod.<span class="property">__esModule</span>) ? mod : { <span class="string">"default"</span>: mod };</span><br><span class="line">};</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="built_in">exports</span>, <span class="string">"__esModule"</span>, { <span class="attr">value</span>: <span class="literal">true</span> });</span><br><span class="line"><span class="built_in">exports</span>.<span class="property">renderTikzjax</span> = <span class="keyword">void</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> node_tikzjax_1 = <span class="title function_">__importDefault</span>(<span class="built_in">require</span>(<span class="string">"node-tikzjax"</span>));</span><br><span class="line"><span class="keyword">const</span> common_1 = <span class="built_in">require</span>(<span class="string">"./common"</span>);</span><br><span class="line"><span class="keyword">const</span> queue_1 = <span class="title function_">__importDefault</span>(<span class="built_in">require</span>(<span class="string">"./queue"</span>));</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Extract TikZ code blocks from post content and render them into SVGs with `node-tikzjax`.</span></span><br><span class="line"><span class="comment"> * The generated SVGs are saved in cache with a hash as their keys for better performance.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">renderTikzjax</span>(<span class="params">data</span>) {</span><br><span class="line">    <span class="keyword">const</span> config = <span class="variable language_">this</span>.<span class="property">config</span>.<span class="property">tikzjax</span>;</span><br><span class="line">    <span class="keyword">if</span> (!data.<span class="property">tikzjax</span> &amp;&amp; !config.<span class="property">every_page</span>) {</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// Set up loggers.</span></span><br><span class="line">    <span class="keyword">const</span> logPrefix = <span class="string">'[hexo-filter-tikzjax]'</span>;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">debug</span> = (<span class="params">...args</span>) =&gt; <span class="variable language_">this</span>.<span class="property">log</span>.<span class="property">debug</span>.<span class="title function_">apply</span>(<span class="variable language_">this</span>.<span class="property">log</span>, [logPrefix, ...args]);</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">error</span> = (<span class="params">...args</span>) =&gt; <span class="variable language_">this</span>.<span class="property">log</span>.<span class="property">error</span>.<span class="title function_">apply</span>(<span class="variable language_">this</span>.<span class="property">log</span>, [logPrefix, ...args]);</span><br><span class="line">    queue_1.<span class="property">default</span>.<span class="title function_">setLogger</span>({ debug, error });</span><br><span class="line">    <span class="comment">// Find all TikZ and TikZ-cd code blocks in Markdown source.</span></span><br><span class="line">    <span class="keyword">const</span> regex = <span class="regexp">/```tikz(cd)?\n([\s\S]+?)```/g</span>;</span><br><span class="line">    <span class="keyword">const</span> matches = data.<span class="property">content</span>.<span class="title function_">matchAll</span>(regex);</span><br><span class="line">    <span class="keyword">for</span> <span class="title function_">await</span> (<span class="keyword">const</span> match <span class="keyword">of</span> matches) {</span><br><span class="line">        <span class="comment">// Generate a hash for each TikZ code block as its cache key.</span></span><br><span class="line">        <span class="keyword">const</span> hash = (<span class="number">0</span>, common_1.<span class="property">md5</span>)(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(match[<span class="number">0</span>]) + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(config));</span><br><span class="line">        <span class="keyword">let</span> svg = common_1.<span class="property">localStorage</span>.<span class="title function_">getItem</span>(hash);</span><br><span class="line">        <span class="keyword">if</span> (!svg) {</span><br><span class="line">            <span class="keyword">const</span> input = match[<span class="number">2</span>]?.<span class="title function_">trim</span>(); <span class="comment">//match[0]=full string, match[1]=empty or cd, match[2]=tex codes</span></span><br><span class="line">            <span class="keyword">if</span> (!input) {</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="comment">// Since `node-tikzjax` does not allow concurrent calls,</span></span><br><span class="line">            <span class="comment">// we have to use a task queue to make sure that only one call is running at a time.</span></span><br><span class="line">            <span class="comment">// This could be a bottleneck when generating a large number of posts.</span></span><br><span class="line">            <span class="title function_">debug</span>(<span class="string">'Processing TikZ graphic...'</span>, hash);</span><br><span class="line">            svg = <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> {</span><br><span class="line">                queue_1.<span class="property">default</span>.<span class="title function_">enqueue</span>(<span class="title function_">async</span> () =&gt; {</span><br><span class="line">                    <span class="keyword">const</span> svg = <span class="title function_">await</span> (<span class="number">0</span>, node_tikzjax_1.<span class="property">default</span>)(input, {</span><br><span class="line">                        <span class="attr">showConsole</span>: <span class="variable language_">this</span>.<span class="property">env</span>.<span class="property">debug</span>,</span><br><span class="line">                        ...config.<span class="property">tikzjax_options</span>,</span><br><span class="line">                    });</span><br><span class="line">                    <span class="title function_">resolve</span>(svg);</span><br><span class="line">                });</span><br><span class="line">            });</span><br><span class="line">            <span class="keyword">if</span> (svg) {</span><br><span class="line">                common_1.<span class="property">localStorage</span>.<span class="title function_">setItem</span>(hash, svg);</span><br><span class="line">                <span class="title function_">debug</span>(<span class="string">'TikZ graphic saved in cache.'</span>, hash);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span> {</span><br><span class="line">                <span class="title function_">debug</span>(<span class="string">'TikZ graphic not generated. Skipped.'</span>, hash);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> {</span><br><span class="line">            <span class="title function_">debug</span>(<span class="string">'TikZ graphic found in cache. Skip rendering.'</span>, hash);</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// Replace the TikZ or TikZ-cd code block with a placeholder</span></span><br><span class="line">        <span class="comment">// so that we can insert the SVG later in `insertSvg` function.</span></span><br><span class="line">        <span class="keyword">if</span> (match[<span class="number">1</span>]) {</span><br><span class="line">            <span class="keyword">const</span> placeholder = <span class="string">`&lt;!-- tikzjax-cd-placeholder-<span class="subst">${hash}</span> --&gt;`</span>;</span><br><span class="line">            data.<span class="property">content</span> = data.<span class="property">content</span>.<span class="title function_">replace</span>(match[<span class="number">0</span>], placeholder);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> {</span><br><span class="line">            <span class="keyword">const</span> placeholder = <span class="string">`&lt;!-- tikzjax-placeholder-<span class="subst">${hash}</span> --&gt;`</span>;</span><br><span class="line">            data.<span class="property">content</span> = data.<span class="property">content</span>.<span class="title function_">replace</span>(match[<span class="number">0</span>], placeholder);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">}</span><br><span class="line"><span class="built_in">exports</span>.<span class="property">renderTikzjax</span> = renderTikzjax;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>再把 <code>insert-svg.js</code> 修改为:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="built_in">exports</span>, <span class="string">"__esModule"</span>, { <span class="attr">value</span>: <span class="literal">true</span> });</span><br><span class="line"><span class="built_in">exports</span>.<span class="property">insertSvg</span> = <span class="keyword">void</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> common_1 = <span class="built_in">require</span>(<span class="string">"./common"</span>);</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Insert generated SVGs into HTML of the post as inline tags.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * We separate this function from `renderTikzjax` and run them in different filters,</span></span><br><span class="line"><span class="comment"> * since we need the Markdown source to render TikZ graphics (in `before_post_render`).</span></span><br><span class="line"><span class="comment"> * But insert SVGs into Markdown source will cause problems, so we wait until the Markdown</span></span><br><span class="line"><span class="comment"> * source is rendered into HTML, then insert SVGs into HTML (in `after_render:html`).</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Since we need to process archive/tags/categories pages too, if they contains posts which</span></span><br><span class="line"><span class="comment"> * have TikZ graphs in it, the `after_post_render` filter is not sufficient.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">insertSvg</span>(<span class="params">html, locals</span>) {</span><br><span class="line">    <span class="keyword">const</span> config = <span class="variable language_">this</span>.<span class="property">config</span>.<span class="property">tikzjax</span>;</span><br><span class="line">    <span class="keyword">const</span> page = locals.<span class="property">page</span>;</span><br><span class="line">    <span class="keyword">const</span> indexContains = page.<span class="property">__index</span> &amp;&amp; page.<span class="property">posts</span>.<span class="title function_">toArray</span>().<span class="title function_">find</span>(<span class="function">(<span class="params">post</span>) =&gt;</span> post.<span class="property">tikzjax</span>);</span><br><span class="line">    <span class="comment">// Only process if a post contains TikZ, or it's an index page and one of the posts contains TikZ.</span></span><br><span class="line">    <span class="keyword">if</span> (!page.<span class="property">tikzjax</span> &amp;&amp; !config.<span class="property">every_page</span> &amp;&amp; !indexContains) {</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// Prepend CSS for TikZJax.</span></span><br><span class="line">    html = html.<span class="title function_">replace</span>(<span class="regexp">/&lt;head&gt;(?!&lt;\/head&gt;).+?&lt;\/head&gt;/</span>s, <span class="function">(<span class="params">str</span>) =&gt;</span> str.<span class="title function_">replace</span>(<span class="string">'&lt;/head&gt;'</span>, <span class="string">`&lt;link rel="stylesheet" type="text/css" href="<span class="subst">${config.font_css_url}</span>" /&gt;`</span> +</span><br><span class="line">        (config.<span class="property">inline_style</span> ? <span class="string">`&lt;style&gt;<span class="subst">${config.inline_style}</span>&lt;/style&gt;`</span> : <span class="string">''</span>) +</span><br><span class="line">        <span class="string">'&lt;/head&gt;'</span>));</span><br><span class="line">    <span class="comment">// Find all TikZ placeholders inserted by `renderTikzjax`.</span></span><br><span class="line">    <span class="keyword">const</span> regex = <span class="regexp">/&lt;!-- tikzjax-(cd-)?placeholder-(\w+?) --&gt;/g</span>;</span><br><span class="line">    <span class="keyword">const</span> matches = html.<span class="title function_">matchAll</span>(regex);</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">debug</span> = (<span class="params">...args</span>) =&gt; <span class="variable language_">this</span>.<span class="property">log</span>.<span class="title function_">debug</span>(<span class="string">'[hexo-filter-tikzjax]'</span>, ...args);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> match <span class="keyword">of</span> matches) {</span><br><span class="line">        <span class="keyword">const</span> hash = match[<span class="number">2</span>]?.<span class="title function_">trim</span>();</span><br><span class="line">        <span class="keyword">if</span> (!hash) {</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">const</span> svg = common_1.<span class="property">localStorage</span>.<span class="title function_">getItem</span>(hash);</span><br><span class="line">        <span class="title function_">debug</span>(<span class="string">'Looking for SVG in cache...'</span>, hash);</span><br><span class="line">        <span class="keyword">if</span> (svg) {</span><br><span class="line">            <span class="keyword">if</span> (match[<span class="number">1</span>]) {</span><br><span class="line">                <span class="keyword">const</span> svg_cd = svg.<span class="title function_">replace</span>(<span class="string">'g stroke="#000"'</span>, <span class="string">'g stroke="#000" fill="#000"'</span>)</span><br><span class="line">                .<span class="title function_">replaceAll</span>(<span class="string">'#000'</span>, <span class="string">'currentColor'</span>)</span><br><span class="line">                .<span class="title function_">replace</span>(<span class="regexp">/\b(width|height)=["']([\d.]+)["']/g</span>, <span class="function">(<span class="params">match, attr, value</span>) =&gt;</span> {</span><br><span class="line">                    <span class="keyword">const</span> scaledValue = <span class="built_in">parseFloat</span>(value) * <span class="number">1.5</span>;</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">`<span class="subst">${attr}</span>="<span class="subst">${scaledValue.toFixed(<span class="number">3</span>)}</span>"`</span>;</span><br><span class="line">                })</span><br><span class="line">                html = html.<span class="title function_">replace</span>(match[<span class="number">0</span>], <span class="string">`&lt;p&gt;&lt;span class="tikzjax"&gt;<span class="subst">${svg_cd}</span>&lt;/span&gt;&lt;/p&gt;`</span>);</span><br><span class="line">                <span class="title function_">debug</span>(<span class="string">'SVG commutative diagram inserted!'</span>, hash);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span> {</span><br><span class="line">                html = html.<span class="title function_">replace</span>(match[<span class="number">0</span>], <span class="string">`&lt;p&gt;&lt;span class="tikzjax"&gt;<span class="subst">${svg}</span>&lt;/span&gt;&lt;/p&gt;`</span>);</span><br><span class="line">                <span class="title function_">debug</span>(<span class="string">'SVG inserted!'</span>, hash);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> {</span><br><span class="line">            <span class="title function_">debug</span>(<span class="string">'SVG not found in cache. Skipped.'</span>, hash);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> html;</span><br><span class="line">}</span><br><span class="line"><span class="built_in">exports</span>.<span class="property">insertSvg</span> = insertSvg;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>于是现在只需要使用 <code>tikzcd</code> 代码块就能画出想要的交换图:</p>
<p><span class="tikzjax">
        <svg xmlns="http://www.w3.org/2000/svg" width="450.777" height="230.072" viewBox="-72 -72 225.389 115.036">
    
        <defs>
            <filter id="invert">
                <feColorMatrix in="SourceGraphic" type="matrix" values="-1 0 0 0 1  0 -1 0 0 1  0 0 -1 0 1  0 0 0 1 0" />
            </filter>
            <mask id="opacity-mask">
                <g filter="url(#invert)">
                    <rect x="-72" y="-72" width="227" height="117" fill="white"/>
                    <g stroke="#000" stroke-miterlimit="10" stroke-width=".4"><g stroke="none"><g stroke="none"><text x="95.147" y="-114.107" font-family="cmr10" font-size="10" transform="translate(-120.778 53.858)">k</text><text x="100.147" y="-114.107" font-family="cmr10" font-size="10" transform="translate(-120.778 53.858)">er</text><text x="108.508" y="-118.58" font-family="cmsy7" font-size="7" transform="translate(-120.778 53.858)">0</text></g><g stroke="none" font-family="cmr10" font-size="10"><text x="151.966" y="-114.107" transform="translate(-119.375 53.858)">k</text><text x="156.966" y="-114.107" transform="translate(-119.375 53.858)">er</text></g><g stroke="none"><text x="209.938" y="-114.107" font-family="cmr10" font-size="10" transform="translate(-121.93 53.858)">k</text><text x="214.938" y="-114.107" font-family="cmr10" font-size="10" transform="translate(-121.93 53.858)">er</text><text x="223.299" y="-118.58" font-family="cmsy7" font-size="7" transform="translate(-121.93 53.858)">00</text></g><g stroke="none"><text x="95.147" y="-81.27" font-family="cmmi10" font-size="10" transform="translate(-118.632 53.858)">X</text><text x="104.216" y="-84.899" font-family="cmsy7" font-size="7" transform="translate(-118.632 53.858)">0</text></g><text x="151.966" y="-81.27" stroke="none" font-family="cmmi10" font-size="10" transform="translate(-117.23 53.858)">X</text><g stroke="none"><text x="209.938" y="-81.27" font-family="cmmi10" font-size="10" transform="translate(-119.785 53.858)">X</text><text x="219.008" y="-84.899" font-family="cmsy7" font-size="7" transform="translate(-119.785 53.858)">00</text></g><text x="259.008" y="-81.27" stroke="none" font-family="cmr10" font-size="10" transform="translate(-115.194 53.858)">0</text><text x="47.23" y="-48.433" stroke="none" font-family="cmr10" font-size="10" transform="translate(-115.194 53.858)">0</text><g stroke="none"><text x="95.147" y="-48.433" font-family="cmmi10" font-size="10" transform="translate(-118.111 53.858)">Y</text><text x="103.174" y="-52.062" font-family="cmsy7" font-size="7" transform="translate(-118.111 53.858)">0</text></g><text x="151.966" y="-48.433" stroke="none" font-family="cmmi10" font-size="10" transform="translate(-116.708 53.858)">Y</text><g stroke="none"><text x="209.938" y="-48.433" font-family="cmmi10" font-size="10" transform="translate(-119.264 53.858)">Y</text><text x="217.966" y="-52.062" font-family="cmsy7" font-size="7" transform="translate(-119.264 53.858)">00</text></g><g stroke="none"><text x="95.147" y="-14.752" font-family="cmr10" font-size="10" transform="translate(-125.5 53.858)">cok</text><text x="109.591" y="-14.752" font-family="cmr10" font-size="10" transform="translate(-125.5 53.858)">er</text><text x="117.952" y="-19.224" font-family="cmsy7" font-size="7" transform="translate(-125.5 53.858)">0</text></g><g stroke="none" font-family="cmr10" font-size="10"><text x="151.966" y="-14.752" transform="translate(-124.097 53.858)">cok</text><text x="166.41" y="-14.752" transform="translate(-124.097 53.858)">er</text></g><g stroke="none"><text x="209.938" y="-14.752" font-family="cmr10" font-size="10" transform="translate(-126.653 53.858)">cok</text><text x="224.383" y="-14.752" font-family="cmr10" font-size="10" transform="translate(-126.653 53.858)">er</text><text x="232.744" y="-19.224" font-family="cmsy7" font-size="7" transform="translate(-126.653 53.858)">00</text></g></g><path fill="none" d="M-4.959-62.75h32.645"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M25.806-65.149c.38 1.44 1.226 2.12 2.08 2.4-.854.28-1.7.96-2.08 2.4"/><path fill="none" d="M-17.548-56.39v17.2"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M-15.148-41.07c-1.44.38-2.12 1.228-2.4 2.08-.28-.852-.96-1.7-2.4-2.08"/><path fill="none" d="M50.458-62.75h32.644"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M81.222-65.149c.38 1.44 1.227 2.12 2.08 2.4-.853.28-1.7.96-2.08 2.4"/><path fill="none" d="M39.272-56.39v17.885"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M41.671-40.385c-1.44.38-2.12 1.227-2.4 2.08-.28-.853-.96-1.7-2.4-2.08"/><path fill="none" d="M97.244-56.39v17.2"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M99.644-41.07c-1.44.38-2.12 1.228-2.4 2.08-.28-.852-.96-1.7-2.4-2.08"/><path fill="none" d="M-17.548-23.552v17.2"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M-15.148-8.232c-1.44.38-2.12 1.227-2.4 2.08-.28-.853-.96-1.7-2.4-2.08"/><path fill="none" d="M-7.105-29.912h36.936"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M27.951-32.312c.38 1.44 1.227 2.12 2.08 2.4-.853.28-1.7.96-2.08 2.4"/><text x="40.424" y="-14.752" stroke="none" font-family="cmmi7" font-size="7" transform="translate(-31.203 -18.874)">f</text><path fill="none" d="M39.272-23.552v17.885"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M41.671-7.547c-1.44.38-2.12 1.226-2.4 2.08-.28-.854-.96-1.7-2.4-2.08"/><path fill="none" d="M48.312-29.912h36.936"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M83.368-32.312c.38 1.44 1.227 2.12 2.08 2.4-.853.28-1.7.96-2.08 2.4"/><text x="40.424" y="-14.752" stroke="none" font-family="cmmi7" font-size="7" transform="translate(24.48 -18.874)">g</text><path fill="none" d="M108.84-29.912h30.068"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M137.028-32.312c.38 1.44 1.227 2.12 2.08 2.4-.853.28-1.7.96-2.08 2.4"/><path fill="none" d="M97.244-23.552v17.2"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M99.644-8.232c-1.44.38-2.12 1.227-2.4 2.08-.28-.853-.96-1.7-2.4-2.08"/><path fill="none" d="M-58.459 2.926h30.589"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M-29.75.526c.38 1.44 1.227 2.12 2.08 2.4-.853.28-1.7.96-2.08 2.4"/><path fill="none" d="M-7.626 2.926h37.978"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M28.472.526c.38 1.44 1.227 2.12 2.08 2.4-.853.28-1.7.96-2.08 2.4"/><text x="40.424" y="-14.752" stroke="none" font-family="cmmi7" font-size="7" transform="translate(-31.225 15.325)">u</text><path fill="none" d="M-17.548 9.285v17.2"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M-15.148 24.605c-1.44.38-2.12 1.227-2.4 2.08-.28-.853-.96-1.7-2.4-2.08"/><path fill="none" d="M47.791 2.926h37.978"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M83.889.526c.38 1.44 1.227 2.12 2.08 2.4-.853.28-1.7.96-2.08 2.4"/><text x="40.424" y="-14.752" stroke="none" font-family="cmmi7" font-size="7" transform="translate(24.43 15.325)">v</text><path fill="none" d="M39.272 9.285v18.617"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M41.671 26.022c-1.44.38-2.12 1.227-2.4 2.08-.28-.853-.96-1.7-2.4-2.08"/><path fill="none" d="M97.244 9.285v17.2"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M99.644 24.605c-1.44.38-2.12 1.227-2.4 2.08-.28-.853-.96-1.7-2.4-2.08"/><path fill="none" stroke="#fff" stroke-width="6.458" d="M-34.859 36.606h-4.611a4 4 0 0 1-4-4v-43.358a4 4 0 0 1 4-4h155.066a4 4 0 0 0 4-4V-58.75a4 4 0 0 0-4-4h-4.61"/><g stroke-dasharray="2.79985,1.59991"><path fill="none" d="M-35.259 36.606h-4.211a4 4 0 0 1-4-4v-43.358a4 4 0 0 1 4-4h155.066a4 4 0 0 0 4-4V-58.75a4 4 0 0 0-4-4h-4.61"/><path fill="none" stroke-dasharray="none" stroke-linecap="round" stroke-linejoin="round" d="M-37.139 34.206c.38 1.44 1.227 2.12 2.08 2.4-.853.28-1.7.96-2.08 2.4"/><g fill="#fff"><path stroke="none" d="M26.984-19.335h-.194a4 4 0 0 0-4 4v1.166a4 4 0 0 0 4 4h.194a4 4 0 0 0 4-4v-1.166a4 4 0 0 0-4-4M22.79-10.17"/><text x="40.424" y="-14.752" fill="#000" stroke="none" font-family="cmmi7" font-size="7" transform="translate(-15.482 2.43)">±</text></g></g><path fill="none" d="M-.237 36.606h23.2"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M21.083 34.206c.38 1.44 1.227 2.12 2.08 2.4-.853.28-1.7.96-2.08 2.4"/><path fill="none" d="M55.18 36.606h23.2"/><path fill="none" stroke-linecap="round" stroke-linejoin="round" d="M76.5 34.206c.38 1.44 1.227 2.12 2.08 2.4-.853.28-1.7.96-2.08 2.4"/></g>
                </g>
            </mask>
        </defs>
        <rect x="-72" y="-72" width="227" height="117" fill="var(--text-color)" mask="url(#opacity-mask)"/>
    </svg></span></p>

<p>本来以为事情到这里就结束了, 结果经过仔细观察, 这字符的间距是不是不太对? 它好像把我的 ker 拆成了 k-er, 把我的 coker 拆成了 cok-er, 所以 k 和 e 的间距变小了一点. 这是不能容忍的, 必须要出重拳!</p>
<p>查看 <code>hexo-filter-tikzjax</code> 的源代码, 发现生成部分主要调用的是作者的下层包 <code>node-tikzjax.default</code>, 查看 <code>node-tikzjax/disc/index.js</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// row 18:</span></span><br><span class="line"><span class="keyword">const</span> dvi2svg_1 = <span class="built_in">require</span>(<span class="string">"./dvi2svg"</span>);</span><br><span class="line"><span class="comment">// row 24-30:</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">tex2svg</span>(<span class="params">input, options</span>) {</span><br><span class="line">    <span class="title function_">await</span> (<span class="number">0</span>, bootstrap_1.<span class="property">load</span>)();</span><br><span class="line">    <span class="keyword">const</span> dvi = <span class="title function_">await</span> (<span class="number">0</span>, bootstrap_1.<span class="property">tex</span>)(input, options);</span><br><span class="line">    <span class="keyword">const</span> svg = <span class="title function_">await</span> (<span class="number">0</span>, dvi2svg_1.<span class="property">dvi2svg</span>)(dvi, options);</span><br><span class="line">    <span class="keyword">return</span> svg;</span><br><span class="line">}</span><br><span class="line"><span class="built_in">exports</span>.<span class="property">default</span> = tex2svg;</span><br></pre></td></tr></table></figure>
<p>去 <code>dvi2svg.js</code> 里看了看:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// row 5:</span></span><br><span class="line"><span class="keyword">const</span> dvi2html_1 = <span class="built_in">require</span>(<span class="string">"@prinsss/dvi2html"</span>);</span><br><span class="line"><span class="comment">// row 16-27:</span></span><br><span class="line">    <span class="keyword">let</span> html = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">const</span> dom = <span class="keyword">new</span> jsdom_1.<span class="title function_">JSDOM</span>(<span class="string">`&lt;!DOCTYPE html&gt;`</span>);</span><br><span class="line">    <span class="keyword">const</span> <span class="variable language_">document</span> = dom.<span class="property">window</span>.<span class="property">document</span>;</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">function</span>* <span class="title function_">streamBuffer</span>(<span class="params"></span>) {</span><br><span class="line">        <span class="keyword">yield</span> <span class="title class_">Buffer</span>.<span class="title function_">from</span>(dvi);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="title function_">await</span> (<span class="number">0</span>, dvi2html_1.<span class="property">dvi2html</span>)(<span class="title function_">streamBuffer</span>(), {</span><br><span class="line">        <span class="title function_">write</span>(<span class="params">chunk</span>) {</span><br><span class="line">            html = html + chunk.<span class="title function_">toString</span>();</span><br><span class="line">        },</span><br><span class="line">    });</span><br></pre></td></tr></table></figure>
<p>核心又是另一个库 <code>@prinsss/dvi2html</code> 中的 <code>dvi2html</code>, 去看 <code>/lib/index.js</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// row 59-75</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">dvi2html</span>(<span class="params">dviStream, htmlStream</span>) {</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">__awaiter</span>(<span class="variable language_">this</span>, <span class="keyword">void</span> <span class="number">0</span>, <span class="keyword">void</span> <span class="number">0</span>, <span class="keyword">function</span> (<span class="params"></span>) {</span><br><span class="line">        <span class="keyword">var</span> parser, machine;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">__generator</span>(<span class="variable language_">this</span>, <span class="keyword">function</span> (<span class="params">_a</span>) {</span><br><span class="line">            <span class="keyword">switch</span> (_a.<span class="property">label</span>) {</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                    parser = papersize_1.<span class="title function_">default</span>(svg_1.<span class="title function_">default</span>(psfile_1.<span class="title function_">default</span>(ps_1.<span class="title function_">default</span>(color_1.<span class="title function_">default</span>(parser_1.<span class="title function_">mergeText</span>(parser_1.<span class="title function_">dviParser</span>(dviStream)))))));</span><br><span class="line">                    machine = <span class="keyword">new</span> html_1.<span class="title function_">default</span>(htmlStream);</span><br><span class="line">                    <span class="keyword">return</span> [<span class="number">4</span> <span class="comment">/*yield*/</span>, parser_1.<span class="title function_">execute</span>(parser, machine)];</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                    _a.<span class="title function_">sent</span>();</span><br><span class="line">                    <span class="keyword">return</span> [<span class="number">2</span> <span class="comment">/*return*/</span>, machine];</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">    });</span><br><span class="line">}</span><br><span class="line"><span class="built_in">exports</span>.<span class="property">dvi2html</span> = dvi2html;</span><br></pre></td></tr></table></figure>
<p>其中连续调用了一长串函数, 看着怪吓人的.</p>
<p>直接编译 <code>tex</code> 得到的 <code>dvi</code> 确实把 ker 和 coker 拆开了, 所以是 <code>parser_1.mergeText</code> 的问题吗? 再往后的代码实在看不懂了, 对 <code>dvi</code> 也不熟, 就这样吧.</p>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/posts/2025/01/sidebar-social-icon/" rel="prev" title="侧边栏社交链接图标显示的抽象问题">
                  <i class="fa fa-angle-left"></i> 侧边栏社交链接图标显示的抽象问题
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/posts/2025/02/trivia-magenta/" rel="next" title="冷知识">
                  冷知识 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  
  <div class="comments giscus-container">
  </div>
  
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2022 – 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-cube"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Brkhu</span>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>
<script class="next-config" data-name="giscus" type="application/json">{"enable":true,"repo":"Brkhu/Brkhu.github.io","repo_id":"R_kgDOHPQJ_Q","category":"Announcements","category_id":"DIC_kwDOHPQJ_c4CxD07","mapping":"url","strict":1,"reactions_enabled":1,"emit_metadata":0,"theme":"preferred_color_scheme","lang":"zh-CN","crossorigin":"anonymous","input_position":"bottom","loading":"lazy"}</script>

<script>
document.addEventListener('page:loaded', () => {
  if (!CONFIG.page.comments) return;

  NexT.utils.loadComments('.giscus-container')
    .then(() => NexT.utils.getScript('https://giscus.app/client.js', {
      attributes: {
        async                   : true,
        crossOrigin             : 'anonymous',
        'data-repo'             : CONFIG.giscus.repo,
        'data-repo-id'          : CONFIG.giscus.repo_id,
        'data-category'         : CONFIG.giscus.category,
        'data-category-id'      : CONFIG.giscus.category_id,
        'data-mapping'          : CONFIG.giscus.mapping,
        'data-strict'           : CONFIG.giscus.strict,
        'data-reactions-enabled': CONFIG.giscus.reactions_enabled,
        'data-emit-metadata'    : CONFIG.giscus.emit_metadata,
        'data-theme'            : CONFIG.giscus.theme,
        'data-lang'             : CONFIG.giscus.lang,
        'data-input-position'   : CONFIG.giscus.input_position,
        'data-loading'          : CONFIG.giscus.loading
      },
      parentNode: document.querySelector('.giscus-container')
    }));
});
</script>

</body>
</html>
